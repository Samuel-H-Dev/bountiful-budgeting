(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{4958:function(e,t,s){Promise.resolve().then(s.bind(s,8785))},8785:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var n=s(9268),o=s(6006),l=s(9556),a=s(3603),r=s(3516),i=s(5708),c=s(8870),u=s(6008);function d(){let{handleLogin:e,user:t}=(0,o.useContext)(l.AuthContext),[s,d]=(0,o.useState)(),[g,m]=(0,o.useState)(),[h,x]=(0,o.useState)();return(0,o.useEffect)(()=>{console.log(t),t&&t&&(0,u.redirect)("/")},[t]),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{style:{backgroundImage:"url('../../images/loginImg.jpg')"},className:"absolute top-0 right-0 bottom-0 left-0 lg:bg-[length:110%_105%] md:bg-[length:150%_105%] bg-[length:305%_105%] bg-blue-400 object-center h-[105%] ",children:(0,n.jsx)("div",{className:"my-auto w-full",children:(0,n.jsxs)("div",{className:"  mt-[10%] mx-auto w-11/12 md:w-1/2",children:[(0,n.jsx)("div",{className:"flex justify-center pt-12 md:justify-start md:pl-12 md:-mb-24"}),(0,n.jsx)(a.Z,{h1:!0,size:60,className:"text-center",color:"#00000095",children:" Bountiful Budgeting  "}),(0,n.jsx)(r.Z,{}),(0,n.jsxs)("div",{className:"px-8 pt-8 rounded-lg my-auto bg-cyan-500 bg-opacity-80 mx-auto lg:px-32",children:[(0,n.jsx)("p",{className:"text-3xl mx-auto mt-10",children:"Login"}),(0,n.jsx)(r.Z,{y:.5}),(0,n.jsxs)("form",{onSubmit:t=>{t.preventDefault(),fetch("https://bountiful-budgeting-api.web.app/login",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({email:g,password:h})}).then(e=>e.json()).then(t=>{if(console.log("the data after res.json ",t),t.message)return d(t.message),console.log("This is the conditional that we are looking to run for errors ",t.message),null;e(t)}).catch(e=>d(e.message))},className:"flex flex-col pt-3",children:[(0,n.jsx)("div",{className:"",children:(0,n.jsx)(i.ZP,{labelLeft:"Email",width:"100%",onChange:e=>m(e.target.value)})}),(0,n.jsxs)("div",{className:"flex flex-col pt-4 mb-8",children:[(0,n.jsx)("div",{className:"flex  ",children:(0,n.jsx)(i.ZP.Password,{labelLeft:"Password",width:"100%",onChange:e=>x(e.target.value)})}),s&&(0,n.jsx)("div",{classNameName:"bg-red-200 border-red-600 text-red-600 border-l-4 p-4 mt-4",children:(0,n.jsx)("p",{children:s})})]}),(0,n.jsx)(c.ZP,{auto:!0,type:"submit",color:"gradient",children:"Submit"})]}),(0,n.jsx)("div",{className:"pt-12 pb-12 text-center",children:(0,n.jsxs)("p",{children:["Not a member?  ",(0,n.jsx)("a",{href:"signup",className:"font-semibold pl-1 underline",children:"Signup here."})]})})]})]})})})})}},9556:function(e,t,s){"use strict";s.r(t),s.d(t,{AuthContext:function(){return l},AuthProvider:function(){return a}});var n=s(9268),o=s(6006);let l=(0,o.createContext)();function a(e){let{children:t}=e,[s,a]=(0,o.useState)(),[r,i]=(0,o.useState)();return(0,o.useEffect)(()=>{if(!s){let e=sessionStorage.getItem("user"),t=sessionStorage.getItem("token");console.log("Session Storage",s),e&&a(JSON.parse(e)),t&&i(t)}},[]),(0,n.jsx)(l.Provider,{value:{user:s,token:r,setUser:a,setToken:i,handleLogin:e=>{console.log("data recived by handle login ",e),console.log("data set in token ",e.token),a(e.user),i(e.token),sessionStorage.setItem("user",JSON.stringify(e.user)),sessionStorage.setItem("token",e.token)},handleLogout:()=>{a(),i(),sessionStorage.clear()}},children:t})}}},function(e){e.O(0,[379,253,961,744],function(){return e(e.s=4958)}),_N_E=e.O()}]);