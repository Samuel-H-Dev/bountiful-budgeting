(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5444:function(e,t,s){Promise.resolve().then(s.bind(s,4695))},4695:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return j}});var l=s(9268),o=s(6006);function n(e){let{profile:t,user:s}=e,[n,r]=(0,o.useState)(0),a=null==t?void 0:t.filter(e=>!0===e.expense);return(0,o.useEffect)(()=>{let e=0;for(let t=0;t<a.length;t++)e+=Math.floor(a[t].amount);console.log(s),r(e)},[a]),(0,l.jsxs)("section",{className:"bg-[#71A1FF] w-11/12 min-h-[10%] text-[#051A9A] overflow-y-scroll no-scrollbar max-h-[75%] scroll-smooth flex flex-wrap flex-row rounded-xl text-xl",children:[(0,l.jsx)("h2",{className:"pl-3 pt-4 font-semibold w-full underline mb-2",children:"Calculations"}),(0,l.jsx)("div",{className:"w-[45%] pb-2",children:a.map(e=>(0,l.jsx)("div",{className:" w-11/12 -pb-1 pl-2 border-slate-500 border-b-[1px] mx-auto my-0",children:(0,l.jsxs)("div",{className:"flex flex-wrap  flex-row",children:[(0,l.jsxs)("p",{className:"text-md border-slate-500 border-r-[2px] w-[40%] ",children:[e.title," "]}),(0,l.jsxs)("p",{className:"w-[50%] text-md text-left ml-2 my-1",children:[" -$",parseFloat(e.amount).toLocaleString()]})]})},e.id))}),(0,l.jsxs)("div",{className:"w-[45%]",children:[(0,l.jsxs)("div",{className:"border-b-2 border-slate-900",children:[(0,l.jsxs)("p",{children:["Monthly Income: $",null==s?void 0:s.monthlyIncome]}),(0,l.jsxs)("p",{children:["Total Expenses: $",n]})]}),(0,l.jsx)("p",{children:"Remaining Balence: "}),(null==s?void 0:s.monthlyIncome)?(0,l.jsxs)("p",{children:[" $",(null==s?void 0:s.monthlyIncome)-n]}):(0,l.jsx)("p",{children:"Income required"})]})]})}var r=s(8899),a=s(8870),i=s(5708),c=s(3516),d=s(3085),x=s(3770),h=s(3603);function m(e){let{profile:t,deleteEvent:s,updatedIncome:o,user:n}=e,m=t.filter(e=>!0===e.expense);return console.log(t),(0,l.jsxs)("section",{className:"bg-gradient-to-b from-[#051A9A] pb-2 to-blue-700 w-5/6 text-[#96A6FF] overflow-y-scroll no-scrollbar min-h-[10%] max-h-[75%] rounded-xl text-xl",children:[(0,l.jsxs)("div",{className:"flex flex-wrap flex-row pt-4 pl-3",children:[(0,l.jsx)("h2",{className:" font-semibold underline pr-2 w-fit",children:"Income: "}),(null==n?void 0:n.monthlyIncome)?(0,l.jsxs)("p",{children:["$",parseFloat(n.monthlyIncome).toLocaleString()]}):(0,l.jsx)("p",{className:"w-fit",children:"No estimated income listed"}),(0,l.jsx)("div",{className:"w-fit mr-[12%] mt-4 ml-auto",children:(0,l.jsxs)(r.Z,{placement:"left",children:[(0,l.jsx)(r.Z.Trigger,{children:(0,l.jsx)(a.ZP,{color:"warning",size:"xs",auto:!0,ghost:!0,children:"Update"})}),(0,l.jsx)(r.Z.Content,{className:"px-4 py-1",children:(0,l.jsxs)("form",{onSubmit:o,children:[(0,l.jsx)(i.ZP,{labelLeft:"Updated Income",className:"mx-auto px-2 py-1 rounded-xl my-4",type:"text",name:"updated_income"}),(0,l.jsx)(a.ZP,{type:"sumbit",className:"mx-auto mb-2",size:"sm",shadow:!0,color:"error",children:"Update"})]})})]})})]}),(0,l.jsx)(c.Z,{}),(0,l.jsx)("h2",{className:"pl-3 font-semibold underline ",children:"Expenses"}),null==m?void 0:m.map(e=>(0,l.jsx)("div",{className:" w-11/12  pl-2 border-slate-500 border-b-[1px] py-1 mx-auto my-4",children:(0,l.jsxs)("div",{className:"flex flex-wrap mx-auto flex-row",children:[(0,l.jsx)("p",{className:" text-lg border-slate-500 border-r-[2px]  w-[40%]",children:e.title}),(0,l.jsxs)("p",{className:" pl-2 text-lg  w-[40%]",children:["$",parseFloat(e.amount).toLocaleString()]}),(0,l.jsx)("div",{children:(0,l.jsxs)(r.Z,{children:[(0,l.jsx)(r.Z.Trigger,{children:(0,l.jsx)(a.ZP,{color:"error",size:"xs",auto:!0,flat:!0,children:"Delete"})}),(0,l.jsx)(r.Z.Content,{children:(0,l.jsx)("div",{className:"p-2",children:(0,l.jsxs)(d.ZP.Container,{css:{borderRadius:"14px",padding:"0.75rem",maxWidth:"350px"},children:[(0,l.jsx)(x.Z,{justify:"center",align:"center",children:(0,l.jsx)(h.Z,{b:!0,children:"Confirm"})}),(0,l.jsx)(x.Z,{children:(0,l.jsx)(h.Z,{className:"pb-4",children:"Are you sure you want to delete this item?"})}),(0,l.jsxs)(d.ZP.Container,{alignContent:"center",children:[(0,l.jsx)(d.ZP,{}),(0,l.jsx)(d.ZP,{children:(0,l.jsx)(a.ZP,{onClick:t=>s(e.id,e.uid),size:"sm",shadow:!0,color:"error",children:"Delete"})})]})]})})})]})})]})},e.id))]})}var u=s(9556),p=s(6008),f=s(7271),g=s(278);function j(){let{user:e,token:t,setUser:s,setToken:r,handleLogout:c}=(0,o.useContext)(u.AuthContext),[d,j]=(0,o.useState)(),[b,y]=(0,o.useState)(),[N,w]=(0,o.useState)(),[v,Z]=(0,o.useState)(!1),[S,P]=(0,o.useState)("Select One");(0,o.useEffect)(()=>{if(!e){let t=sessionStorage.getItem("user"),l=sessionStorage.getItem("token");console.log("Session Storage",e),l&&r(l),t?s(JSON.parse(t)):(0,p.redirect)("/login")}e&&(console.log("ifUser",e),console.log("ifUser token",t),fetch("https://bountiful-budgeting-api.web.app/dashboard/".concat(e.id),{headers:{"Content-type":"application/json",Authorization:t}}).then(e=>e.json()).then(e=>{j(e)}).catch(e=>alert(e.message)))},[e]);let C=()=>{Z(!1),console.log("closed")};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("header",{className:" body-font ",children:(0,l.jsxs)("div",{className:"container mx-auto flex flex-wrap p-5 flex-col md:flex-row items-center",children:[(0,l.jsxs)("div",{className:"flex title-font items-center text-gray-950 font-bold mb-4 md:mb-0",children:[(0,l.jsx)("img",{src:"../../images/Logo.png",className:"max-h-10 aspect-auto"}),(0,l.jsx)("span",{className:"ml-3 text-blue-400 text-3xl opacity-80",children:"Bountiful Budgeting"})]}),(0,l.jsx)("nav",{className:"md:w-[35%]  mx-auto my-2 items-center",children:(0,l.jsx)(a.ZP,{auto:!0,color:"gradient",shadow:!0,onPress:()=>Z(!0),children:"Add Item +"})}),(0,l.jsxs)(a.ZP,{auto:!0,onClick:c,className:"bg-violet-900",children:[" ",(0,l.jsx)(h.Z,{color:"#fff",children:"Log Out"})]})]})}),(0,l.jsx)("section",{className:" mx-auto w-fit h-fit mt-5 ",children:(0,l.jsx)("div",{children:(0,l.jsx)(f.ZP,{closeButton:!0,blur:!0,"aria-labelledby":"modal-title",open:v,onClose:C,children:(0,l.jsxs)("form",{onSubmit:s=>{if(s.preventDefault(),console.log(e),console.log(b),console.log(N),console.log(S),!b||!N){alert("all field must be filled");return}let l={title:b,amount:N,expense:!0,uid:e.id};fetch("https://bountiful-budgeting-api.web.app/dashboard/".concat(e.id),{method:"POST",headers:{"Content-Type":"application/json",Authorization:t},body:JSON.stringify(l)}).then(e=>e.json()).then(e=>{console.log(e),j(e)}).catch(e=>{console.error(e),alert(e.message)}),y(""),w(""),P("Select One")},children:[(0,l.jsx)(f.ZP.Header,{children:(0,l.jsx)(h.Z,{children:(0,l.jsx)(h.Z,{b:!0,size:18,children:"New Item"})})}),(0,l.jsxs)(f.ZP.Body,{children:[(0,l.jsx)(i.ZP,{onChange:e=>y(e.target.value),clearable:!0,bordered:!0,fullWidth:!0,color:"primary",size:"lg",placeholder:"Water Bill",labelLeft:"title"}),(0,l.jsx)(i.ZP,{onChange:e=>w(e.target.value),type:"number",bordered:!0,fullWidth:!0,color:"primary",size:"lg",placeholder:"Ex:300",labelLeft:"Amount"}),(0,l.jsx)(x.Z,{justify:"left"})]}),(0,l.jsxs)(f.ZP.Footer,{justify:"space-evenly",children:[(0,l.jsx)(a.ZP,{auto:!0,flat:!0,color:"error",onPress:C,children:"Close"}),(0,l.jsx)(a.ZP,{type:"submit",auto:!0,onPress:C,children:"Add"})]})]})})})}),(0,l.jsx)("div",{className:"flex flex-wrap h-screen flex-row w-[95%] mx-auto mt-5",children:d?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("section",{className:"w-[50%]",children:(0,l.jsx)(m,{user:e,updatedIncome:l=>{l.preventDefault();let o=l.target.updated_income.value;console.log(e.id),fetch("https://bountiful-budgeting-api.web.app/dashboard/".concat(e.id),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:t},body:JSON.stringify({monthlyIncome:o})}).then(e=>e.json()).then(e=>{console.log("info gotten after patch req",e),s(e)}).catch(e=>{console.error(e),alert(e.message)})},deleteEvent:function(e,s){console.log(e),console.log(s),fetch("https://bountiful-budgeting-api.web.app/dashboard/".concat(s),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:t},body:JSON.stringify({id:e})}).then(e=>e.json()).then(e=>{console.log(e),j(e)}).catch(e=>{console.error(e),alert(e.message)})},profile:d})}),(0,l.jsx)("section",{className:" w-[50%]",children:(0,l.jsx)(n,{profile:d,user:e})})]}):(0,l.jsx)(g.ZP,{color:"secondary",type:"points",className:"w-fit mx-auto h-fit mt-9",textColor:"primary",size:"xl",children:"Please Wait"})})]})}},9556:function(e,t,s){"use strict";s.r(t),s.d(t,{AuthContext:function(){return n},AuthProvider:function(){return r}});var l=s(9268),o=s(6006);let n=(0,o.createContext)();function r(e){let{children:t}=e,[s,r]=(0,o.useState)(),[a,i]=(0,o.useState)();return(0,o.useEffect)(()=>{if(!s){let e=sessionStorage.getItem("user"),t=sessionStorage.getItem("token");console.log("Session Storage",s),e&&r(JSON.parse(e)),t&&i(t)}},[]),(0,l.jsx)(n.Provider,{value:{user:s,token:a,setUser:r,setToken:i,handleLogin:e=>{console.log("data recived by handle login ",e),console.log("data set in token ",e.token),r(e.user),i(e.token),sessionStorage.setItem("user",JSON.stringify(e.user)),sessionStorage.setItem("token",e.token)},handleLogout:()=>{r(),i(),sessionStorage.clear()}},children:t})}}},function(e){e.O(0,[379,167,253,961,744],function(){return e(e.s=5444)}),_N_E=e.O()}]);